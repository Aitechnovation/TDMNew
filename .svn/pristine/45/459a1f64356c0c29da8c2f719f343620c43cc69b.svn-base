
@{
    ViewBag.Title = "View";

}



<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Pragma" content="no-cache">
    <title>กรมธนารักษ์</title>
    @***************************
        *   JS
        ****************************@
    <!-- jQuery -->
    <script src="~/assets/js/jquery-2.1.0.min.js"></script>
    <!-- Bootstrap -->
    <script src="~/assets/bootstrap/js/bootstrap.min.js"></script>
    <!-- FastClick -->
    <script src="~/assets/js/fastclick/fastclick.js"></script>
    <!-- NProgress -->
    <script src="~/assets/js/nprogress/nprogress.js"></script>
    <!-- Custom Theme Scripts -->
    <script src="~/assets/js/custom_pera/custom.min.js"></script>
    <!-- Custom Pera Scripts -->
    <script src="~/assets/js/custom_pera/custom.pera.js"></script>
    <!-- Datatables -->
    <!--<script src="../vendors/datatables.net/js/jquery.dataTables.min.js"></script>-->
    <script src="~/assets/js/datatables/jquery.dataTables.min.js"></script>
    @*<script src="../vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>*@
    <script src="~/assets/js/datatables/dataTables.bootstrap.min.js"></script>
    @*<script src="../vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>*@
    <script src="~/assets/js/datatables/dataTables.buttons.min.js"></script>
    @*<script src="../vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>*@
    <script src="~/assets/js/datatables/buttons.bootstrap.min.js"></script>
    @*<script src="../vendors/datatables.net-buttons/js/buttons.flash.min.js"></script>*@
    <script src="~/assets/js/datatables/buttons.flash.min.js"></script>
    @*<script src="../vendors/datatables.net-buttons/js/buttons.html5.min.js"></script>*@
    <script src="~/assets/js/datatables/buttons.html5.min.js"></script>
    @*<script src="../vendors/datatables.net-buttons/js/buttons.print.min.js"></script>*@
    <script src="~/assets/js/datatables/buttons.print.min.js"></script>
    @*<script src="../vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>*@
    <script src="~/assets/js/datatables/dataTables.fixedHeader.min.js"></script>
    @*<script src="../vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>*@
    <script src="~/assets/js/datatables/dataTables.keyTable.min.js"></script>
    @*<script src="../vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>*@
    <script src="~/assets/js/datatables/dataTables.responsive.min.js"></script>
    @*<script src="../vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>*@
    <script src="~/assets/js/datatables/responsive.bootstrap.js"></script>
    @*<script src="../vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>*@
    <script src="~/assets/js/datatables/dataTables.scroller.min.js"></script>
    @*<script src="../vendors/jszip/dist/jszip.min.js"></script>*@
    <script src="~/assets/js/datatables/jszip.min.js"></script>
    @*<script src="../vendors/pdfmake/build/pdfmake.min.js"></script>*@
    <script src="~/assets/js/datatables/pdfmake.min.js"></script>
    @*<script src="../vendors/pdfmake/build/vfs_fonts.js"></script>*@
    <script src="~/assets/js/datatables/vfs_fonts.js"></script>
    <!-- e Chart -->
    <script src="~/assets/js/Chart/echarts.min.js"></script>
    <!-- notification -->
    <script src="~/assets/js/iziToast.js"></script>

    <script src="~/Scripts/map_loader.js"></script>

    <script src="~/assets/js/DashboardSystem3/ViewListHandler.js?v3"></script>
    
    




    @***************************
            *    CSS
        ****************************@
    <!-- Bootstrap -->
    <link href="~/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="~/assets/fonts/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="~/assets/css/nprogress/nprogress.css" rel="stylesheet">
    <!-- Custom Theme Style -->
    <link href="~/assets/css/custom_pera/custom.min.css" rel="stylesheet">
    <!-- Fonts Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <!-- Datatables -->
    <link href="~/assets/css/datatables/dataTables.bootstrap.min.css" rel="stylesheet">
    <link href="~/assets/css/datatables/buttons.bootstrap.min.css" rel="stylesheet">
    <link href="~/assets/css/datatables/fixedHeader.bootstrap.min.css" rel="stylesheet">
    <link href="~/assets/css/datatables/responsive.bootstrap.min.css" rel="stylesheet">
    <link href="~/assets/css/datatables/scroller.bootstrap.min.css" rel="stylesheet">
    <!-- notification -->
    <link href="~/assets/css/iziToast.min.css" rel="stylesheet" />
    <link href="~/assets/css/Kim_Style.css?v1" rel="stylesheet">
    <style>
        /*body ความกว้าง*/
        .nav-md .container.body .right_col {
            margin-left: 1px !important;
        }

        /*รูปกรมธนารักษ์*/
        .main_container .top_nav {
            margin-left: 0px !important;
        }

        /*ความสูง แถบติดตามความก้าวหน้าของการประเมินราคา*/
        .fixed_height_950 {
            height: 950px;
        }

        .fixed_height_750 {
            height: 750px;
        }

        .fixed_height_800 {
            height: 800px;
        }

        .fixed_height_371 {
            height: 371px;
        }

        .x_title h2 {
            width: 85% !important;
        }

        .td__Center {
            text-align: center !important;
        }

        .th__center {
            text-align: center !important;
        }

        .RecentActive__Label {
            vertical-align: bottom !important;
            padding-left: 7px;
        }

        .RecentActive__Label__Alert {
            border-radius: 6px;
            padding-right: 6px;
            padding-left: 5px;
            vertical-align: bottom !important;
        }

        .dataTables_filter {
            width: 100% !important;
        }

        .Label__Header {
            font-size: 18px;
            font-weight: 400;
        }

        .border__chart {
            border-radius: 25px;
            border: 2px solid #73AD21;
            padding: 20px;
            /*width: 1227px;*/
            width: 100%;
            height: 489px;
            background-repeat: repeat;
        }


        .wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }


        #chart2 {
            height: 600px;
            min-width: 310px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .loading {
            margin-top: 10em;
            text-align: center;
            color: gray;
        }


        /*แถบ ระบบ*/
        /*.ul.quick-list{
            width: 95% !important;
        }*/
    </style>


    <script>

        $(function () {
            var $tabButtonItem = $('.tab-button li'),
                $tabSelect = $('.tab-select'),
                $tabContents = $('.tab-contents'),
                activeClass = 'is-active';

            $tabButtonItem.first().addClass(activeClass);
            $tabContents.not(':first').hide();

            $tabButtonItem.find('a').on('click', function (e) {
                var target = $(this).attr('href');

                $tabButtonItem.removeClass(activeClass);
                $(this).parent().addClass(activeClass);
                $tabSelect.val(target);
                $tabContents.hide();
                $(target).show();
                e.preventDefault();
            });

            $tabSelect.on('change', function () {
                var target = $(this).val(),
                    targetSelectNum = $(this).prop('selectedIndex');

                $tabButtonItem.removeClass(activeClass);
                $tabButtonItem.eq(targetSelectNum).addClass(activeClass);
                $tabContents.hide();
                $(target).show();
            });

        });
    </script>
</head>

<body class="nav-md">
    <div class="container body">
        <div class="main_container">


            <!-- top navigation -->
            <div class="top_nav">
                <div class="nav_menu">
                    <nav>
                        <ul class="nav navbar-nav ">
                            <li class="">
                                <a href="~/"><img src="~/assets/img/logo.png" alt="logo"></a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
            <!-- /top navigation -->
            <!-- page content -->
            <div class="right_col" role="main">
                <!-- Header -->
                <div class="row ">
                    <div class="col-md-12 col-sm-12 col-xs-12 tile_stats_count" style="text-align:center">
                        <!-- col-md-12 col-sm-12 col-xs-12-->
                        <div class="count" style="margin-top:20px"><label style="font-size:30px">ระบบสารสนเทศด้านการประเมินราคาที่ดินสำหรับผู้บริหาร</label></div>
                    </div>
                </div>



                <!--row 1-->
                <div class="row" >
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="panel with-nav-tabs panel-primary">
                            <div class="panel-heading">
                                <ul class="nav nav-tabs">
                                    <li class="active"><a href="#tab1primary" data-toggle="tab">ที่ดิน</a></li>
                                    <li><a href="#tab2primary" data-toggle="tab">อาคารชุด</a></li>
                                    <li><a href="#tab3primary" data-toggle="tab">สิ่งปลูกสร้าง</a></li>
                                  
                                </ul>
                            </div>
                            <div class="panel-body">
                                <div class="tab-content">
                                    <div class="tab-pane fade in active" id="tab1primary">

                                        <div class="x_panel tile  ">
                                            <div class="x_title">
                                                <div class="col-md-10 col-sm-8 col-xs-9">
                                                    <label class="Label__Header">ติดตามความก้าวหน้าของการประเมินราคา</label>
                                                </div>
                                                <div class="col-md-2 col-sm-4 col-xs-3">
                                                    <ul class="nav navbar-right panel_toolbox">
                                                        <li>
                                                            <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                                        </li>
                                                        <li class="dropdown">
                                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                                            <ul class="dropdown-menu" role="menu">
                                                                <li>
                                                                    <a href="#">Settings 1</a>
                                                                </li>
                                                                <li>
                                                                    <a href="#">Settings 2</a>
                                                                </li>
                                                            </ul>
                                                        </li>
                                                        <li>
                                                            <a class="close-link"><i class="fa fa-close"></i></a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>
                                            <div class="x_content">
                                                <div class="dashboard-widget-content">
                                                    <a href="~/Home/System_3_with_Layout?Menu=4" style="cursor:pointer">
                                                        <div class="row" style="text-align:center">
                                                            <div class="col-md-3 col-sm-3 col-xs-12" style="height:270px;margin-top:0px;">
                                                                <div class="col-md-12 col-sm-12 col-xs-12">แผนงานปรับราคาประเมินที่ดินรายแปลง</div>
                                                                <div id="chartSpeedometer1_1" class="col-md-12 col-sm-12 col-xs-12" style="height:270px;margin-top:0px;cursor:pointer"></div>
                                                            </div>
                                                            <div class="col-md-3 col-sm-3 col-xs-12" style="height:270px;margin-top:0px;">
                                                                <div class="col-md-12 col-sm-12 col-xs-12">แผนงานขยายพื้นที่ประเมินราคาที่ดินรายแปลง</div>
                                                                <div id="chartSpeedometer1_2" class="col-md-12 col-sm-12 col-xs-12" style="height:270px;margin-top:0px;cursor:pointer"></div>
                                                            </div>
                                                            <div class="col-md-3 col-sm-3 col-xs-12" style="height:270px;margin-top:0px;">
                                                                <div class="col-md-12 col-sm-12 col-xs-12">แผนงานการปรับราคาประเมินทุนทรัพย์ห้องชุด</div>
                                                                <div id="chartSpeedometer1_3" class="col-md-12 col-sm-12 col-xs-12" style="height:270px;margin-top:0px;cursor:pointer"></div>
                                                            </div>
                                                            <div class="col-md-3 col-sm-3 col-xs-12" style="height:270px;margin-top:0px;">
                                                                <div class="col-md-12 col-sm-12 col-xs-12">แผนงานการประเมินราคาทุนทรัพย์โรงเรือนสิ่งปลูกสร้าง</div>
                                                                <div id="chartSpeedometer1_4" class="col-md-12 col-sm-12 col-xs-12" style="height:270px;margin-top:0px;cursor:pointer"></div>
                                                            </div>
                                                        </div>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="tab-pane fade" id="tab2primary">อาคารชุด</div>
                                    <div class="tab-pane fade" id="tab3primary">สิ่งปลูกสร้าง</div>
                                    <div class="tab-pane fade" id="tab4primary">Primary 4</div>
                                    <div class="tab-pane fade" id="tab5primary">Primary 5</div>
                                </div>
                            </div>
                        </div>
                    </div>
                   
                </div>

               

                <div class="row">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="x_panel tile  ">
                            <div class="x_title">
                                <div class="col-md-10 col-sm-8 col-xs-9">
                                    <label class="Label__Header">ราคาประเมิน (ที่ดิน)</label>
                                </div>
                                <div class="col-md-2 col-sm-4 col-xs-3">
                                    <ul class="nav navbar-right panel_toolbox">
                                        <li>
                                            <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                        </li>
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                            <ul class="dropdown-menu" role="menu">
                                                <li>
                                                    <a href="#">Settings 1</a>
                                                </li>
                                                <li>
                                                    <a href="#">Settings 2</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a class="close-link"><i class="fa fa-close"></i></a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                              
                                <div class="row">
                                    <div class="col-xs-3">
                                        <div class="x_panel tile  ">
                                            <p>
                                                <label class="Label__Header">ราคาประเมิน ตามภาค</label>
                                            </p>
                                            <div class="alert alert-1 msg">
                                               <h2>เหนือ</h2>
                                               <h3 class="text-center">159,000 ล้านบาท</h3>
                                            </div>

                                            <div class="alert alert-2 msg">
                                                <h2>กลาง</h2>
                                                <h3 class="text-center">90,000 ล้านบาท</h3>
                                            </div>

                                            <div class="alert alert-3 msg">
                                                <h2>ใต้</h2>
                                                <h3 class="text-center">180,000 ล้านบาท</h3>
                                            </div>

                                            <div class="alert alert-4 msg">
                                                <h2>ตะวันออก</h2>
                                                <h3 class="text-center">120,000 ล้านบาท</h3>
                                            </div>

                                            <div class="alert alert-5 msg">
                                                <h2>ตะวันตก</h2>
                                                <h3 class="text-center">134,000 ล้านบาท</h3>
                                            </div>

                                            <div class="alert alert-6 msg">
                                                <h2>ตะวันออกเฉียงเหนือ</h2>
                                                <h3 class="text-center">134,000 ล้านบาท</h3>
                                            </div>


                                           </div>


                                        </div>

                                        <!-- Section 1 Mapping Display-->
                                        <div class="col-xs-5">
                                            <div class="row">
                                                <div class="col-xs-12" id="pnlSectionSearch1">
                                                   
                                                        <section>

                                                            <!-- Search section1 part 1(Search) -->
                                                            <div class="row">
                                                                <div class="col-xs-12">
                                                                    <div class="panel panel-primary">
                                                                        <div class="panel-heading">
                                                                            <div class="row">
                                                                                <div class="col-xs-6">
                                                                                    <h4>เลือกจังหวัดที่ต้องการค้นหา</h4>
                                                                                </div>

                                                                            </div>

                                                                        </div>
                                                                        <div class="panel-body">

                                                                            <div class="row">
                                                                                <div class="col-sm-12">
                                                                                    <label class="subCaption" for="validationCustom03">ระบุความสนใจตามเขตการปกครอง</label>
                                                                                </div>

                                                                            </div>


                                                                            <div class="row">
                                                                                <div class="col-sm-6">

                                                                                    <div class="form-group">
                                                                                        <label for="ddlRegion">เลือกภาค</label>
                                                                                        <select class="form-control form-control-lg" name="ddlRegion" id="ddlRegion" required>
                                                                                            <option value="1">ภาคกลาง</option>
                                                                                            <option value="2">ตะวันตก</option>
                                                                                            <option value="3">เหนือ</option>
                                                                                            <option value="4">ตะวันออกเฉียงเหนือ</option>
                                                                                            <option value="5">ใต้</option>
                                                                                            <option value="6">ตะวันออก</option>
                                                                                        </select>
                                                                                    </div>

                                                                                </div>

                                                                                <div class="col-sm-6">

                                                                                    <div class="form-group">
                                                                                        <label for="ddlProvince">เลือกจังหวัด</label>
                                                                                        <select class="form-control form-control-lg" name="ddlProvince" id="ddlProvince" required>
                                                                                            <option value="">ทั้งหมด </option>

                                                                                        </select>
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-sm-6">

                                                                                    <div class="form-group">
                                                                                        <label for="ddlDistrict">เลือกอำเภอ</label>
                                                                                        <select class="form-control form-control-lg" name="ddlDistrict" id="ddlDistrict" required>
                                                                                            <option value="">ทั้งหมด </option>

                                                                                        </select>
                                                                                    </div>

                                                                                </div>

                                                                                <div class="col-sm-6">

                                                                                    <div class="form-group">
                                                                                        <label for="ddlSubdistrict">เลือกตำบล</label>
                                                                                        <select class="form-control form-control-lg" name="ddlSubdistrict" id="ddlSubdistrict" required>
                                                                                            <option value="">ทั้งหมด </option>

                                                                                        </select>
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-sm-6">
                                                                                    <button class="form-control btn btn-success" id="bttClear" name="bttClear"><i class="fa fa-search">&nbsp;คลัสเตอร์</i></button>
                                                                                </div>
                                                                                <div class="col-sm-6">
                                                                                    <button class="form-control btn btn-primary btnSearch" id="bttSearch" name="bttSearch"><i class="fa fa-search">&nbsp;ค้นหา</i></button>
                                                                                </div>
                                                                            </div>


                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-xs-12">
                                                                    <iframe class="map-height" id="tdmap" width="100%" frameborder="0" style="border:0;height:800px" allowfullscreen></iframe>
                                                                </div>

                                                            </div>
                                                            <!-- Search section1 part 1(Search) -->


                                                        </section>

                                                    

                                                </div>

                                            </div>

                                        </div>
                                        <!-- Section 1 Mapping Display-->
                                    <div class="col-xs-4">
                                        <div class="row">
                                            <h4>แผนภูมิแสดงราคาที่ดินรายภาค</h4>
                                        </div>
                                     <div class="row">
                                         
                                         <div id="chartBar1"   style="height: 400px;padding-left:10px;" ></div>

                                     </div>
                                        <div class="row">
                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                <div class="x_panel tile  ">
                                                    <table class="table table-striped tblInfo">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">ภาค</th>
                                                                <th scope="col">จำนวนแปลงที่ดิน</th>
                                                                <th scope="col">พื้นที่รวม</th>
                                                                <th scope="col">ราคาประเมินที่ดิน</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                               
                                                                <td>ใต้</td>
                                                                <td>190,000 แปลง</td>
                                                                <td>100000 ตารางวา</td>
                                                                <td>100000 บาท</td>
                                                            </tr>
                                                            <tr>
                                                                
                                                                <td>ตะวันออก</td>
                                                                <td>160,000 แปลง</td>
                                                                <td>245000 ตารางวา</td>
                                                                <td>4400000 บาท</td>
                                                            </tr>
                                                            <tr>
                                                                
                                                                <td>ตะวันตก</td>
                                                                <td>190,000 แปลง</td>
                                                                <td>566000 ตารางวา</td>
                                                                <td>1999000 บาท</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    </div>
                                                </div>

                                                </div>
                                            </div>
                                        </div>

                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="panel panel-login">

                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-6">
                                    <a href="#" class="active">แผนที่สรุป S/A ข้อมูล Ratio</a>
                                </div>

                            </div>

                        </div>
                        <div class="panel-body">
                            <div id="regions_div" style="width: 900px; height: 500px;"></div>

                        </div>

                    </div>

                </div>

            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div id="chart2"></div>

                </div>

            </div>


        </div>
    </div>
</body>

<script type="text/javascript">



        function drawRegionsMap() {
            var data = google.visualization.arrayToDataTable([
              ['Country', 'Popularity'],
              ['Germany', 200],
              ['United States', 300],
              ['Brazil', 400],
              ['Canada', 500],
              ['France', 600],
              ['RU', 700]
            ]);

            var options = {};

            var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

            chart.draw(data, options);
        }

        function DrawThai() {
            var data = google.visualization.arrayToDataTable([
              ['City','Name', 'Total'],
              ['TH-10', 'Bangkok', 2761477],
               ['TH-12', 'Nonthaburi', 500000],
                ['TH-50', 'Chiang Mai', 3999999],
                  ['TH-41', 'Udon Thani',1090000],
            ]);

            var options = {
                region: 'TH', // Africa
                isStacked: true,
                resolution: 'provinces',
                colorAxis: { colors: ['red', '#f1a43a', 'blue', 'green'] },
                tooltip: { textStyle: { fontName: '"Verdana"', fontSize: 14 } },
                legend: { textStyle: { color: 'black', fontSize: 10 } },
                keepAspectRatio: false,

              //  backgroundColor: '#fff',
              //  datalessRegionColor: '#f8bbd0',
               // defaultColor: '#f5f5f5',
            };

            var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));
            chart.draw(data, options);
        };

        function drawCity2Map() {
            var data = google.visualization.arrayToDataTable([
              ['Country', 'Latitude'],
              ['Algeria', 36], ['Angola', -8], ['Benin', 6], ['Botswana', -24],
              ['Burkina Faso', 12], ['Burundi', -3], ['Cameroon', 3],
              ['Canary Islands', 28], ['Cape Verde', 15],
              ['Central African Republic', 4], ['Ceuta', 35], ['Chad', 12],
              ['Comoros', -12], ['Cote d\'Ivoire', 6],
              ['Democratic Republic of the Congo', -3], ['Djibouti', 12],
              ['Egypt', 26], ['Equatorial Guinea', 3], ['Eritrea', 15],
              ['Ethiopia', 9], ['Gabon', 0], ['Gambia', 13], ['Ghana', 5],
              ['Guinea', 10], ['Guinea-Bissau', 12], ['Kenya', -1],
              ['Lesotho', -29], ['Liberia', 6], ['Libya', 32], ['Madagascar', null],
              ['Madeira', 33], ['Malawi', -14], ['Mali', 12], ['Mauritania', 18],
              ['Mauritius', -20], ['Mayotte', -13], ['Melilla', 35],
              ['Morocco', 32], ['Mozambique', -25], ['Namibia', -22],
              ['Niger', 14], ['Nigeria', 8], ['Republic of the Congo', -1],
              ['Réunion', -21], ['Rwanda', -2], ['Saint Helena', -16],
              ['São Tomé and Principe', 0], ['Senegal', 15],
              ['Seychelles', -5], ['Sierra Leone', 8], ['Somalia', 2],
              ['Sudan', 15], ['South Africa', -30], ['South Sudan', 5],
              ['Swaziland', -26], ['Tanzania', -6], ['Togo', 6], ['Tunisia', 34],
              ['Uganda', 1], ['Western Sahara', 25], ['Zambia', -15],
              ['Zimbabwe', -18]
            ]);

            var options = {
                region: '002', // Africa
                colorAxis: { colors: ['#00853f', 'black', '#e31b23'] },
                backgroundColor: '#81d4fa',
                datalessRegionColor: '#f8bbd0',
                defaultColor: '#f5f5f5',
            };

            var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));
            chart.draw(data, options);
        }


        function drawCity(shape) {
            shapes = {};

            var symbol = {
                "type": "esriSFS",
                "style": "esriSFSSolid",
                "color": [0, 0, 0, 20],
                "outline": {
                    "type": "esriSLS",
                    "style": "esriSLSSolid",
                    "color": [0, 0, 0, 255],
                    "width": 2
                }
            };
            return drawShape(shape, symbol);
        }

        function drawParcel(shape) {
            var symbol = {
                "type": "esriSFS",
                "style": "esriSFSSolid",
                "color": [0, 255, 163, 80],
                "outline": {
                    "type": "esriSLS",
                    "style": "esriSLSSolid",
                    "color": [0, 0, 0, 255],
                    "width": 1
                }
            };
            return drawShape(shape, symbol);
        }

        function drawParcelImpact(shape) {
            var symbol = {
                "type": "esriSFS",
                "style": "esriSFSSolid",
                "color": [255, 0, 0, 100],
                "outline": {
                    "type": "esriSLS",
                    "style": "esriSLSSolid",
                    "color": [255, 0, 0, 255],
                    "width": 1
                }
            };
            return drawShape(shape, symbol);
        }


        function drawAreaImpact(shape) {
            var symbol = {
                "type": "esriSLS",
                "style": "esriSLSDash",
                "color": [255, 0, 0, 255],
                "width": 2
            };
            return drawShape(shape, symbol);
        }

        function drawShape(shape, symbol) {
            if (shape) {
                return map.addGraphic(shape.split(';')[1], symbol);
            }
            return null;
        }

        function refreshMapDraw() {
            var province = $("#province").val();
            var district = $("#district").val();
            var subDistrict = $("#sub-district").val();

            var province_id = provincesMap[province] ? provincesMap[province].PROVINCE_ID : null;
            var district_id = districtsMap[district] ? districtsMap[district].AMPHUR_ID : null;
            var subDistrict_id = subDistrictsMap[subDistrict] ? subDistrictsMap[subDistrict].TAMBOL_ID : null;

            map.clear();
        }





        //================================ MAP ============================================


        function encrpty(json) {
            return http.post("/api/GIS/Encrypt", { text: JSON.stringify(json) });
        }

        function _mapPostMessage(senderData) {
            encrpty(senderData).then(function (encryptData) {
                var domain = window.document.location.origin;
                gisIframeWindow.postMessage(encryptData, domain);
            });
        }

        var map = {};
        map.zoom2 = function (data) {
            var shape = "POLYGON((11192608.387724396 1878156.1069176663,11265987.934878146 1770532.7710921667,11119228.840570647 1741180.9522306668,11192608.387724396 1878156.1069176663))";
            var srid = 102100;
            var symbol = {
                "type": "esriSLS",
                "style": "esriSLSSolid",
                "color": [115, 76, 0, 255],
                "width": 1
            }

            var gIdGlobal = gisIframeWindow.GIS.addGraphic(shape, srid, symbol);
            console.log(gIdGlobal);
        }

        map.zoom = function (data) {
            var jsonData = {
                zoomBy: "MapService",
                "graphicLayerId": "parcel1",
                mapServiceJsonList: [{
                    layerName: "TD_VIEW",
                    layerIndexName: "PARCEL_47_50",
                    where: "PARCEL_47_50",
                    titleField: "PARCEL_47_50",
                    detailField: "",
                    rendering: {
                    }
                }]
            }

            var senderData = {
                event: 'zoom-map',
                data: jsonData
            }
            senderData = JSON.stringify(senderData);
            encrpty(senderData).then(function (encryptData) {
                gisIframeWindow.postMessage(encryptData, 'https://p-staging.treasury.go.th/TD2');
            });
        }

        map.zoomProc = function (id) {
            var senderData = zoom_select_province(id);
            _mapPostMessage(senderData);
        }

        map.zoomAmphoe = function (id) {
            var senderData = zoomBy_MapService_baseMap('AMPHOE', id);
            _mapPostMessage(senderData);
        }

        map.zoomTambol = function (id) {
            var senderData = zoomBy_MapService_baseMap('TAMBOL', id);
            _mapPostMessage(senderData);
        }

        map.drawPOI = function (x, y, r) {
            var transRes = map.transform(x, y);
            map.buffer(transRes[0].shape, r);
        }

        map.clear = function () {
            gisIframeWindow.GIS.removeGraphic();
        }

        map.addGraphic = function (shape, symbol) {
            var sridIn = 32647;
            var sridOut = [102100];
            var trans = gisIframeWindow.GIS.transform(shape, sridIn, sridOut);

            symbol = symbol || {
                "type": "esriSLS",
                "style": "esriSLSSolid",
                "color": [0, 0, 0, 255],
                "width": 1
            }

            return gisIframeWindow.GIS.addGraphic(trans[0].shape, 102100, symbol);
        }

        map.addGraphicCity = function (shape, symbol) {
            var sridIn = 32647;
            var sridOut = [102100];
            var trans = gisIframeWindow.GIS.transform(shape, sridIn, sridOut);

            symbol = symbol || {
                "type": "esriSLS",
                "style": "esriSLSSolid",
                "color": [115, 76, 0, 255],
                "width": 2
            }

            return gisIframeWindow.GIS.addGraphic(trans[0].shape, 102100, symbol);
        }

        map.removeGraphic = function (gId) {
            gisIframeWindow.GIS.removeGraphic(gId);
        }

        map.transform = function (x, y) {
            var shape = `POINT(${x} ${y})`,
                sridIn = 32647,
                sridOut = [102100];

            var transRes = gisIframeWindow.GIS.transform(shape, sridIn, sridOut);
            return transRes;
        }

        map.buffer = function (shape, r) {
            var srid = 102100,
                radius = parseInt(r),
                addGraphic = true;
            gisIframeWindow.GIS.buffer(shape, srid, radius, addGraphic);
        }

        map.transformShape = function (x, y) {
            var shape = `POINT(${x} ${y})`,
                sridIn = 32647,
                sridOut = [24047, 24048];

            var transRes = gisIframeWindow.GIS.transform(shape, sridIn, sridOut);
            return transRes;
        }

        map.transformPolygon = function (polygon) {
            var shape = polygon,
                sridIn = 32647,
                sridOut = [24047, 24048];

            var transRes = gisIframeWindow.GIS.transform(shape, sridIn, sridOut);
            return transRes;
        }

        map.openMeasurementTool = function (toolName) {
            gisIframeWindow.GIS.openFunction('measurement', { toolName: toolName });
        }

        map.activateDraw = function (callback) {
            // Input
            var toolType = 'polygon',
                clearGraphicWhenComplete = true;

            // Call method
            gisIframeWindow.GIS.activateDraw(toolType, clearGraphicWhenComplete, function (drawEvent) {
                var shape = drawEvent.shape,
                    sridIn = drawEvent.srid,
                    sridOut = [24047, 24048];

                // Call method
                var result = gisIframeWindow.GIS.transform(shape, sridIn, sridOut);

                callback(result);
            });
        }








        //================================ AreaAnalysis ============================================
        var provincesMap = {};
        var districtsMap = {};
        var subDistrictsMap = {};
        var branchMap = {};
        var poiList = [];
        var provinceList = {};
        var shapes = {
            parcel_shape: null
        }



        $(function () {


            var iframeElement = document.getElementById('tdmap');
            iframeElement.src = 'https://p-staging.treasury.go.th/TD2';
            gisIframeWindow = null;
            iframeElement.onload = function () {
                gisIframeWindow = iframeElement.contentWindow; 
            }
            InitialData();

            MakeSpeedDometer('chartSpeedometer1_1', '', 12.5);
            MakeSpeedDometer('chartSpeedometer1_2', '', 11);
            MakeSpeedDometer('chartSpeedometer1_3', '', 16.7);
            MakeSpeedDometer('chartSpeedometer1_4', '', 19);
           // MakeSpeedDometer('chartSpeedometer1_5', '', 22);

          //  MakeSpeedDometer('chartSpeedometer2_1', '', 19);
           // MakeSpeedDometer('chartSpeedometer2_2', '', 21);
           // MakeSpeedDometer('chartSpeedometer2_3', '', 32);
           // MakeSpeedDometer('chartSpeedometer2_4', '', 12);

           // MakeSpeedDometer('chartSpeedometer3_1', '', 32);
           // MakeSpeedDometer('chartSpeedometer3_2', '', 24);


            //$(document).on("click", ".btnSearch", function (e) {

            //     var selProv=$("#province").val();
            //    $.ajax({
            //        type: "GET",
            //        url: "/TDManagement/api/Address/GetProvinceShapeBy",
            //        contentType: "application/json; charset=utf-8",
            //        data: { code: selProv },
            //        dataType: "json",
            //        success: function (data) {
            //            map.clear();
            //            drawCity(data.SHAPE)

            //        }
            //    });
            //});

          
           
            viewListManager.init();
        });



        function MakeSpeedDometer(name, tital, data) {
            var chartSpeedometer = echarts.init(document.getElementById(name));
            optionchartSpeedometer = {
                title: {
                    text: tital,
                    x: 'center',
                    y: '-5%',
                    textStyle: {
                        fontSize: '18'
                    }
                },
                tooltip: {
                    formatter: "{b} : {c}%"
                },
                series: [
                    {
                        name: tital,
                        type: 'gauge',
                        detail: { formatter: '{value}%' },
                        data: [{ value: data, name: '' }]
                    }
                ]
            };
            chartSpeedometer.setOption(optionchartSpeedometer);
        }
    function InitialData()
        {
        LoadChart();
        $.get("/TDManagement/api/Address/GetProvinces", {}, function (data) {

            $("#province").empty();
            $("#province").append("<option value=''>จังหวัด</option>");
            $.each(data, function (index, row) {
                provinceList[row.OBJECTID] = row.NAME_T;
                provincesMap[row.PRO_C] = row;
                $("#province").append("<option value='" + row.PRO_C + "'>" + row.NAME_T + "</option>");
            });
            //$("#province").selectpicker('refresh');
            searchProjectImpactList(0, 1000, null);
        });


       
    }

    function testxx() {
        alert('Heayy');
        $.get("http://localhost:50028/api/Address/GetProvinces", {}, function (provinces) {

            if (provinces != null && provinces.length > 0) {
                $("#ddlProvince").empty();
                $("#ddlProvince").append("<option value=''>จังหวัด</option>");
                provinces.forEach(function (province, index) {
                    $("#ddlProvince").append("<option value='" + province.PROVINCE_SEQ + "'>" + province.PROVINCE_NAME_TH + "</option>");
                });
            }
        });
    


    }


    function LoadChart() {

        var chartBar = echarts.init(document.getElementById('chartBar1'));
        var option = {
            title: {
                text: '',
                subtext: ''
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['ราคาประเมินรวม']
            },
            toolbox: {
                show: true,
                feature: {
                    mark: { show: true },
                    dataView: { show: true, readOnly: false },
                    magicType: { show: true, type: ['line', 'bar'] },
                    restore: { show: true },
                    saveAsImage: { show: true }
                }
            },
            calculable: true,
            xAxis: [
                {
                    type: 'value',
                    boundaryGap: [0, 0.01]
                }
            ],
            yAxis: [
                {
                    type: 'category',
                    data: [{ label: 'ใต้', value: 5, labelColor: 'yellow' }, 'กลาง', 'เหนือ', 'ตะวันตก', 'ตะวันออก', 'ตะวันออกเฉียงเหนือ']
                }
            ],
            series: [
                {
                    name: 'ราคาประเมินรวม',
                    type: 'bar',
                    data: [18203, 23489, 29034, 104970, 131744, 630230],
                    itemStyle: {
                        normal: {
                            color: function (params) {
                                // build a color map as your need.
                                var colorList = [
                                  '#C1232B', '#B5C334', '#FCCE10', '#E87C25', '#27727B',
                                   '#FE8463', '#9BCA63', '#FAD860', '#F3A43B', '#60C0DD',
                                   '#D7504B', '#C6E579', '#F4E001', '#F0805A', '#26C0C0'
                                ];
                                return colorList[params.dataIndex]
                            },
                            label: {
                                show: false,
                                position: 'top',
                                formatter: '{b}\n{c}'
                            }
                        }
                    }

                }
            ]
        };

        chartBar.setOption(option);

    }

</script>
</html>
